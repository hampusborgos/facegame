{"version":3,"file":"4.68851e6111cc31c41aae.hot-update.js","sources":["webpack:///components/ParticleArea.jsx"],"sourcesContent":["import React from 'react'\n\nclass ParticleArea extends React.Component\n{\n    componentDidMount() {\n        // Only include client side\n        initializeProton(this.refs.container, this.refs.particles);\n\n        this._enableEmitter()\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.effect === this.props.effect)\n            return\n\n        switch (prevProps.effect) {\n            case 'bubbles':\n                disableEmitter(BUBBLES)\n                break\n            case 'fireworks':\n                disableEmitter(FIREWORKS)\n                break\n            default:\n                break\n        }\n\n        this._enableEmitter()\n    }\n\n    _enableEmitter() {\n        switch (this.props.effect) {\n            case 'bubbles':\n                enableEmitter(BUBBLES)\n                break\n            case 'fireworks':\n                enableEmitter(FIREWORKS)\n                break\n            default:\n                break\n        }\n    }\n\n    createExplosion(x, y) {\n        _createExplosion(x, y)\n    }\n\n    componentWillUnmount() {\n        destroy(this.refs.particles)\n    }\n    \n    render() {\n        return (\n            <div ref=\"container\" className=\"background\">\n                <style jsx>{`\n                div {\n                    position: absolute;\n                    left: 0;\n                    right: 0;\n                    bottom: 0;\n                    top: 0;\n                    z-index: -1;\n                }\n                `}</style>\n                <canvas ref=\"particles\"></canvas>\n            </div>\n        )\n    }\n}\n\nconst BUBBLES = 'BUBBLES'\nconst FIREWORKS = 'FIREWORKS'\n\nvar _allEmitters = {};\nvar _proton = null;\nconst bubbleColors = ['#529B88', '#CDD180', '#FFFA32', '#FB6255', '#FB4A53', '#FF4E50', '#F9D423'];\n\nvar initializeProton = null;\nvar enableEmitter = null;\nvar disableEmitter = null;\nvar _createExplosion = null; \n\nif (process.browser) {\n    class ProtonTag extends Proton.Initialize {\n\n        constructor(tag) {\n            super()\n\n            this.tag = tag\n        }\n\n        initialize(particle) {\n            particle.tag = this.tag\n        }\n    }\n\n    initializeProton = function(container, canvas) {\n        canvas.width = container.clientWidth;\n        canvas.height = container.clientHeight;\n        let ctx = canvas.getContext('webgl', { antialias: true, stencil: false, depth: false, preserveDrawingBuffer: true });\n        ctx.globalCompositeOperation = \"darker\";\n\n        createProton(canvas);\n        tick();\n    }\n    \n    function destroy() {\n        _proton.destroy()\n    }\n    \n    function createBubbleEmitter(width, height) {\n        let emitter = new Proton.Emitter();\n        emitter.rate = new Proton.Rate(new Proton.Span(2, 8), new Proton.Span(.05, .2));\n    \n        emitter.addInitialize(new Proton.Mass(1));\n        emitter.addInitialize(new Proton.Radius(20, 200));\n        emitter.addInitialize(new Proton.Life(2, 4));\n        emitter.addInitialize(new Proton.Position(new Proton.RectZone(0, 0, width, height)));\n        emitter.addInitialize(new Proton.Body(['/static/image/logo.png'], 128));\n    \n        emitter.addBehaviour(new Proton.Alpha(0.2, 0.8, Infinity, Proton.easeOutCubic));\n        emitter.addBehaviour(new Proton.Scale(1, 0, Infinity, Proton.easeOutCubic));\n        emitter.addBehaviour(new Proton.Rotate(0, new Proton.Span(-4, 4), 'to', Infinity, Proton.easeOutCubic));\n        emitter.addBehaviour(new Proton.Color(bubbleColors, 'random'));\n    \n        return {\n            emitter: emitter\n        }\n    }\n    \n    function createFireworksExplosionEmitter(x, y) {\n        let emitter = new Proton.Emitter();\n        emitter.rate = new Proton.Rate(new Proton.Span(250, 300), 1);\n        emitter.addInitialize(new Proton.Mass(1));\n        emitter.addInitialize(new Proton.Radius(3, 7));\n        emitter.addInitialize(new Proton.Life(1, 3));\n        emitter.addInitialize(new Proton.V(new Proton.Span(5, 8), new Proton.Span(0, 360), 'polar'));\n        \n        emitter.addBehaviour(new Proton.RandomDrift(10, 10, .05));\n        emitter.addBehaviour(new Proton.Alpha(1, 0));\n        emitter.addBehaviour(new Proton.Gravity(3));\n        var color = Math.random() > .3 ? Proton.MathUtils.randomColor() : 'random';\n        emitter.addBehaviour(new Proton.Color(color));\n        \n        emitter.p.x = x;\n        emitter.p.y = y;\n        emitter.emit('once', true);\n    \n        return emitter\n    }\n    \n    function onParticleDeadMakeFireworks(particle) {\n        if (particle.tag === 'firework') {\n            _proton.addEmitter(createFireworksExplosionEmitter(particle.p.x, particle.p.y))\n        }\n    }\n\n    function createFireworksEmitter(width, height) {\n        let emitter = new Proton.Emitter();\n        emitter.rate = new Proton.Rate(new Proton.Span(2, 3), 0.5);\n        \n        emitter.addInitialize(new Proton.Mass(1));\n        emitter.addInitialize(new Proton.Radius(3, 7));\n        emitter.addInitialize(new Proton.P(new Proton.LineZone(10, height, width - 10, height)));\n        emitter.addInitialize(new Proton.Life(0.75, 1.2));\n        emitter.addInitialize(new Proton.V(new Proton.Span(4, 15), new Proton.Span(2, 5, true), 'polar'));\n        emitter.addInitialize(new ProtonTag('firework'))\n    \n        emitter.addBehaviour(new Proton.Gravity(1));\n        emitter.addBehaviour(new Proton.Color('#ff0000', 'random'));\n        \n        return {\n            emitter: emitter,\n            onEnable: (proton) => {\n                proton.addEventListener(Proton.PARTICLE_DEAD, onParticleDeadMakeFireworks);\n            },\n            onDisable: (proton) => {\n                proton.removeEventListener(Proton.PARTICLE_DEAD, onParticleDeadMakeFireworks)\n            },\n        }\n    }\n    \n    function createProton(canvas) {\n        _proton = new Proton;\n        \n        _allEmitters[BUBBLES] = createBubbleEmitter(canvas.width, canvas.height)\n        _allEmitters[FIREWORKS] = createFireworksEmitter(canvas.width, canvas.height)\n    \n        let renderer = new Proton.WebGLRenderer(canvas);\n        renderer.onProtonUpdate = function() {\n            this.gl.clearColor(0, 0, 0, 0.2)\n            this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT)\n        };\n        _proton.addRenderer(renderer);\n    }\n    \n    enableEmitter = function(name) {\n        const emitter = _allEmitters[name]\n        \n        if (emitter.onEnable)\n            emitter.onEnable(_proton)\n\n        emitter.emitter.emit()\n        _proton.addEmitter(emitter.emitter);\n    }\n    \n    disableEmitter = function(name) {\n        const emitter = _allEmitters[name]\n        emitter.emitter.stop()\n        _proton.removeEmitter(emitter.emitter)\n\n        if (emitter.onDisable)\n            emitter.onDisable(_proton)\n    }\n\n    _createExplosion = function(x, y) {\n        _proton.addEmitter(createFireworksExplosionEmitter(x, y))\n    }\n    \n    function tick() {\n        requestAnimationFrame(tick)\n        \n        \n        _proton.update()\n    }\n    \n}\n\nexport default ParticleArea\n\n\n// WEBPACK FOOTER //\n// components/ParticleArea.jsx"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AARA;AACA;AAUA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AARA;AAUA;;;AAEA;AACA;AACA;;;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;;;;;;AAhEA;AACA;AAkEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAyBA;AACA;AACA;AA3BA;AA6BA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AADA;AAGA;AACA;AA/CA;AAiDA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AApEA;AAsEA;AACA;AACA;AACA;AACA;AA1EA;AA4EA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AAnGA;AAqGA;AAEA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAjHA;AA0IA;AACA;AAEA;AACA;AACA;AA/IA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AADA;AACA;AAAA;AAEA;AAHA;AAIA;AACA;AARA;AAAA;AAAA;AAUA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AAaA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AA2FA;AACA;AAEA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AASA;AACA;AACA;AAAA;;;;;;;;;;;;AAjOA;AAmEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;A","sourceRoot":""}